function startsWith(n,t){if(n.length<t.length)return!1;for(var i=t.length-1;i>=0&&n[i]===t[i];--i)continue;return i<0}function escapeHTML(n){return n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var uiStringsEn={"empty-str":"","tooltip-btn-brush":"Handwriting recognition","tooltip-btn-settings":"Keres\u00e9si be\u00e1ll\u00edt\u00e1sok","tooltip-btn-search":"Keres\u00e9s a CHDICT-ben (Enter)","no-animation-for-char":"Ehhez az \u00edr\u00e1sjegyhez sajnos nincs von\u00e1ssorend-anim\u00e1ci\u00f3.","anim-query-failed":"Nem siker\u00fclt bet\u00f6lteni az \u00edr\u00e1sjegyhez tartoz\u00f3 von\u00e1ssorrend-anim\u00e1ci\u00f3t.","anim-attribution":"Forr\u00e1s: <a href='https://skishore.github.io/makemeahanzi/' target='_blank'>makemeahanzi<\/a>","anim-title":"Von\u00e1ssorrend","options-title":"Keres\u00e9si be\u00e1ll\u00edt\u00e1sok","options-script":"\u00cdr\u00e1sjegyek","options-simplified":"Egyszer\u0171s\u00edtett","options-traditional":"Hagyom\u00e1nyos","options-bothscripts":"Mindkett\u0151","options-tonecolors":"Hangs\u00faly szerinti sz\u00ednez\u00e9s","options-nocolors":"Nincs","options-pleco":"Pleco","options-dummitt":"Dummitt","tooltip-history-comment":"Megjegyz\u00e9s hozz\u00e1f\u0171z\u00e9se","tooltip-history-edit":"Sz\u00f3cikk szerkeszt\u00e9se","tooltip-history-flag":"Sz\u00f3cikk megjel\u00f6l\u00e9se (pontatlan, t\u00e9ves vagy hi\u00e1nyos)"},uiStringsHu={"empty-str":"","tooltip-btn-brush":"K\u00e9z\u00edr\u00e1s-felismer\u00e9s","tooltip-btn-settings":"Keres\u00e9si be\u00e1ll\u00edt\u00e1sok","tooltip-btn-search":"Keres\u00e9s a CHDICT-ben (Enter)","no-animation-for-char":"Ehhez az \u00edr\u00e1sjegyhez sajnos nincs von\u00e1ssorend-anim\u00e1ci\u00f3.","anim-query-failed":"Nem siker\u00fclt bet\u00f6lteni az \u00edr\u00e1sjegyhez tartoz\u00f3 von\u00e1ssorrend-anim\u00e1ci\u00f3t.","anim-attribution":"Forr\u00e1s: <a href='https://skishore.github.io/makemeahanzi/' target='_blank'>makemeahanzi<\/a>","anim-title":"Von\u00e1ssorrend","options-title":"Keres\u00e9si be\u00e1ll\u00edt\u00e1sok","options-script":"\u00cdr\u00e1sjegyek","options-simplified":"Egyszer\u0171s\u00edtett","options-traditional":"Hagyom\u00e1nyos","options-bothscripts":"Mindkett\u0151","options-tonecolors":"Hangs\u00faly szerinti sz\u00ednez\u00e9s","options-nocolors":"Nincs","options-pleco":"Pleco","options-dummitt":"Dummitt","tooltip-history-comment":"Megjegyz\u00e9s hozz\u00e1f\u0171z\u00e9se","tooltip-history-edit":"Sz\u00f3cikk szerkeszt\u00e9se","tooltip-history-flag":"Sz\u00f3cikk megjel\u00f6l\u00e9se<br/>(pontatlan, t\u00e9ves vagy hi\u00e1nyos)","dialog-ok":"OK","dialog-cancel":"M\u00e9gse","history-commententry-title":"Megjegyz\u00e9s hozz\u00e1f\u0171z\u00e9se","history-commententry-hint":"\u00cdrd ide, amit hozz\u00e1f\u0171zn\u00e9l a sz\u00f3cikkhez...","history-commententry-successtitle":"Megjegyz\u00e9s elmentve","history-commententry-successmessage":"A megjegyz\u00e9sedet sikeresen elmentette a CHDICT. A sz\u00f3cikket a v\u00e1ltoz\u00e1s-t\u00f6rt\u00e9net els\u0151 oldal\u00e1nak tetej\u00e9n tal\u00e1lod."},uiStrings=uiStringsHu,zdPage=function(){"use strict";function a(){c=window.history.location||window.location;var t=/https?:\/\/[^\/]+(.*)/i.exec(c);i=t[1];startsWith(i,"/en/")||i=="/en"?(r="en",n=i=="/en"?"":i.substring(4),uiStrings=uiStringsEn):startsWith(i,"/hu/")||i=="/hu"?(r="hu",n=i=="/hu"?"":i.substring(4)):(r="hu",n=i)}function v(n){var t,i;if(startsWith(n.rel,"search/")){t=l();for(i in t)n[i]=t[i]}}function y(){var r=window.innerWidth,u=$("#emMeasure")[0].clientWidth,t=r/u,i,n;i=t<5.4?"pt7":t<6?"pt8":t<6.6?"pt9":t<7.2?"pt10":t<7.8?"pt11":t<8.4?"pt12":t<9?"pt13":t>12?"pt16":"pt14";n=$("#theBody");n.hasClass(i)||(n.removeClass("pt7"),n.removeClass("pt8"),n.removeClass("pt9"),n.removeClass("pt10"),n.removeClass("pt11"),n.removeClass("pt12"),n.removeClass("pt13"),n.removeClass("pt14"),n.removeClass("pt16"),n.addClass(i))}function h(){var f,t,i;a();$("#dynPage").addClass("fading");k();++u;f=u;t={action:"dynpage",lang:r,rel:n};v(t);i=$.ajax({url:"/Handler.ashx",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:t});i.done(function(n){nt(n,f)});i.fail(function(){p()})}function p(){$("#dynPage").html("Ouch.")}function w(t){$(document).attr("title",t.title);$("meta[name = 'keywords']").attr("content",t.keywords);$("meta[name = 'description']").attr("content",t.description);$("#dynPage").html(t.html);$("#dynPage").removeClass("fading");for(var i in f)startsWith(n,i)&&f[i](t),n==""&&i=="search"&&f[i](t);$(window).scrollTop(0)}function nt(n,t){t==u&&w(n)}function b(i,r){if(r==-1||r==u){i!=null&&w(i);$(document).on("click","a.ajax",function(){return(t!=null&&(t(),t=null),(n==""||startsWith(n,"search"))&&$(this).attr("id")=="topMenuSearch")?($("#hdrSearch").addClass("on"),$("#hdrMenu").removeClass("on"),$("#subHeader").removeClass("visible"),!1):(history.pushState(null,null,this.href),h(),!1)});$(window).on("popstate",function(){h()});$("#thePage").css("visibility","visible");$("#toMenu").click(function(){$("#hdrSearch").removeClass("on");$("#hdrMenu").addClass("on")})}}function k(){$(".topMenu").removeClass("on");$(".subMenu").removeClass("visible");n==""||startsWith(n,"search")?($("#hdrMenu").removeClass("on"),$("#subHeader").removeClass("visible"),$("#dynPage").addClass("nosubmenu"),$("#headermask").addClass("nosubmenu"),$("#hdrSearch").addClass("on")):($("#hdrSearch").removeClass("on"),$("#hdrMenu").addClass("on"),$("#subHeader").addClass("visible"),$("#dynPage").removeClass("nosubmenu"),$("#headermask").removeClass("nosubmenu"),startsWith(n,"edit")?($("#topMenuEdit").addClass("on"),$("#subMenuEdit").addClass("visible")):startsWith(n,"read")?($("#topMenuRead").addClass("on"),$("#subMenuRead").addClass("visible")):startsWith(n,"download")&&($("#topMenuDownload").addClass("on"),$("#subMenuDownload").addClass("visible")));$(".subMenu span").removeClass("on");startsWith(n,"edit/new")?$("#smEditNew").addClass("on"):startsWith(n,"edit/history")?$("#smEditHistory").addClass("on"):startsWith(n,"edit/existing")?$("#smEditExisting").addClass("on"):startsWith(n,"read/about")?$("#smReadAbout").addClass("on"):startsWith(n,"read/articles")?$("#smReadArticles").addClass("on"):startsWith(n,"read/etc")&&$("#smReadEtc").addClass("on");$("#langSelHu").attr("href","/hu/"+n);$("#langSelEn").attr("href","/en/"+n);$(".langSel").removeClass("on");r=="en"?$("#langSelEn").addClass("on"):r=="hu"&&$("#langSelHu").addClass("on")}function e(n){$("#"+n).remove();zdPage.modalHidden()}var u=0,c=null,i=null,r=null,n=null,f={},o=[],l=null,t=null,s=0,d='<div class="alertBar" id="alertBarId">  <div class="alert" id="alertId">    <div class="alertMessage"><span class="alertTitle" /><span class="alertBody" /><\/div>    <div class="alertClose"><img src="/static/close.svg" alt="" /><\/div>  <\/div><\/div>',g='<div class="modalPopup" id="{{id}}">  <div class="modalPopupInner1">    <div class="modalPopupInner2">      <div class="modalPopupHeader">        <span class="modalPopupTitle">{{title}}<\/span>        <span class="modalPopupClose">X<\/span>      <\/div>      <div class="modalPopupBody">        {{body}}      <\/div>      <div class="modalPopupButtons">        <span class="modalPopupButton modalPopupButtonCancel">{{Cancel}}<\/span>        <span class="modalPopupButton modalPopupButtonOK">{{OK}}<\/span>      <\/div>    <\/div>  <\/div><\/div>';return $(document).ready(function(){var i,f,h,e,s;for(a(),k(),i=0;i!=o.length;++i)o[i]();f=$("#theBody").hasClass("has-initial-content");f||(++u,h=u,e={action:"dynpage",lang:r,rel:n},v(e),s=$.ajax({url:"/Handler.ashx",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:e}),s.done(function(n){b(n,h)}),s.fail(function(){p()}),$("html").click(function(){t!=null&&(t(),t=null)}));$(window).resize(y);y();f&&b(null,-1)}),{registerInitScript:function(n,t){f[n]=t},globalInit:function(n){o.push(n)},getLang:function(){return r},isMobile:function(){return!1},submitSearch:function(n){history.pushState(null,null,"/"+r+"/search/"+n);h()},setSearchParamsProvider:function(n){l=n},getSelBoundElm:function(){var t,n,i;return document.selection?(t=document.selection.createRange(),t.collapse(!0),t.toString()=="")?null:t.parentElement():(n=window.getSelection(),n.toString()=="")?null:(n.getRangeAt?n.rangeCount>0&&(t=n.getRangeAt(0)):(t=document.createRange(),t.setStart(n.anchorNode,n.anchorOffset),t.setEnd(n.focusNode,n.focusOffset),t.collapsed!==n.isCollapsed&&(t.setStart(n.focusNode,n.focusOffset),t.setEnd(n.anchorNode,n.anchorOffset))),t)?(i=t.startContainer,i.nodeType===3?i.parentNode:i):void 0},modalShown:function(n){t!=n&&(t!=null&&t(),t=n)},modalHidden:function(){t=null},showModal:function(n){t!=null&&t();t=null;var i=g;i=i.replace("{{id}}",n.id);i=i.replace("{{title}}",escapeHTML(n.title));i=i.replace("{{body}}",n.body);i=i.replace("{{OK}}",uiStrings["dialog-ok"]);i=i.replace("{{Cancel}}",uiStrings["dialog-cancel"]);$("#dynPage").append(i);t=function(){e(n.id)};$(".modalPopupInner2").click(function(n){n.stopPropagation()});$(".modalPopupClose").click(function(){e(n.id)});$(".modalPopupButtonCancel").click(function(){e(n.id)});$(".modalPopupButtonOK").click(function(){n.confirmed()&&e(n.id)});n.toFocus&&$(n.toFocus).focus()},showAlert:function(n,t,i){var e;$(".alertBar").remove();++s;var u="alertbar"+s,r="alert"+s,f=d.replace("alertBarId",u);f=f.replace("alertId",r);e=$(f);$("body").append(e);$("#"+r+" .alertTitle").text(n);t&&($("#"+r+" .alertTitle").append("<br>"),$("#"+r+" .alertBody").text(t));i?$("#"+r).addClass("alertFail"):$("#"+r).addClass("alertOK");$("#"+r+" .alertClose").click(function(){$("#"+u).remove()});setTimeout(function(){$("#"+r).addClass("visible");setTimeout(function(){$("#"+r).addClass("hidden");setTimeout(function(){$("#"+u).remove()},1e3)},5e3)},50)}}}(),zdNewEntry=function(){"use strict";function l(){t=zdNewEntryServer;$("#newEntrySimp").bind("compositionstart",nt);$("#newEntrySimp").bind("compositionend",tt);$("#newEntrySimp").bind("input",rt);$("#newEntrySimp").keyup(it);$("#acceptSimp").click(s);$("#editSimp").click(ot);$("#acceptTrad").click(g);$("#editTrad").click(d);$("#acceptPinyin").click(e);$("#editPinyin").click(k);$("#acceptTrg").click(p);$("#editTrg").click(y);$("#newEntrySubmit").click(a);$("#newEntrySimp").prop("readonly",!1);$("#newEntrySimp").focus()}function n(n){$(".formBlock").removeClass("active");$(".formBlock").removeClass("ready");$(".formBlock").removeClass("future");$("#blockRefs").addClass("hidden");$("#blockReview").addClass("hidden");$("#newEntrySimp").prop("readonly",!0);$("#newEntryTrg").prop("readonly",!0);$("#newEntryNote").prop("readonly",!0);$(".formErrors").removeClass("visible");$(".formNote").removeClass("hidden");n=="simp"?($("#newEntrySimp").prop("readonly",!1),$("#newEntrySimp").focus(),$("#blockSimp").addClass("active"),$("#blockTrad").addClass("future"),$("#blockPinyin").addClass("future"),$("#blockTrg").addClass("future"),$("#blockRefs").addClass("future"),$("#blockReview").addClass("future"),$("#editTrad").removeClass("hidden"),$("#editPinyin").removeClass("hidden")):n=="trad"?($("#blockSimp").addClass("ready"),$("#blockTrad").addClass("active"),$("#blockPinyin").addClass("future"),$("#blockTrg").addClass("future"),$("#blockRefs").addClass("future"),$("#blockReview").addClass("future"),$("#editPinyin").removeClass("hidden")):n=="pinyin"?($("#blockSimp").addClass("ready"),$("#blockTrad").addClass("ready"),$("#blockPinyin").addClass("active"),$("#blockTrg").addClass("future"),$("#blockRefs").addClass("future"),$("#blockReview").addClass("future")):n=="trg"?($("#newEntryTrg").prop("readonly",!1),$("#newEntryTrg").focus(),$("#blockSimp").addClass("ready"),$("#blockTrad").addClass("ready"),$("#blockPinyin").addClass("ready"),$("#blockTrg").addClass("active"),$("#blockRefs").addClass("active"),$("#blockReview").addClass("future")):n=="review"&&($("#blockReview").removeClass("hidden"),$("#newEntryNote").prop("readonly",!1),$("#newEntryNote").focus(),$("#blockSimp").addClass("ready"),$("#blockTrad").addClass("ready"),$("#blockPinyin").addClass("ready"),$("#blockTrg").addClass("ready"),$("#blockReview").addClass("active"))}function a(){$("#newEntrySubmit").hasClass("disabled")||($("#newEntryNote").val().length<6?($(".formErrors").removeClass("visible"),$("#errorsReview").addClass("visible"),$("#newEntryNote").focus()):($("#errorsReview").removeClass("visible"),$("#newEntrySubmit").addClass("disabled"),t.submit($("#newEntrySimp").val(),r(),o(),$("#newEntryTrg").val(),$("#newEntryNote").val(),v)))}function v(n){$("#newEntrySubmit").removeClass("disabled");n?zdCommon.showAlert("A sz\u00f3cikket sikeresen elt\u00e1roltuk.",null,!1):zdCommon.showAlert("A sz\u00f3cikket nem siker\u00fclt elt\u00e1rolni :(",null,!0)}function y(){n("trg");$("#blockRefs").removeClass("hidden")}function p(){$("#acceptTrg").hasClass("disabled")||(t.verifyTrg($("#newEntrySimp").val(),r(),o(),$("#newEntryTrg").val(),w),$("#acceptTrg").addClass("disabled"))}function w(t){var i,r;if($("#acceptTrg").removeClass("disabled"),t.passed)$("#errorsTrg").removeClass("visible"),$("#noteTrg").removeClass("hidden"),$("#newEntryRender").html(t.preview),n("review");else{for($(".formErrors").removeClass("visible"),$("#errorsTrg").addClass("visible"),$("#noteTrg").addClass("hidden"),$("#errorListTrg").empty(),i=0;i<t.errors.length;++i)r=$("<li/>"),r.text(t.errors[i]),$("#errorListTrg").append(r);$("#newEntryTrg").focus()}}function e(){$("#acceptPinyin").hasClass("disabled")||(t.verifyHead($("#newEntrySimp").val(),r(),o(),b),$("#acceptPinyin").addClass("disabled"))}function b(t){$("#acceptPinyin").removeClass("disabled");t.passed?($("#errorsPinyin").removeClass("visible"),$("#notePinyin").removeClass("hidden"),n("trg"),$("#blockRefs").removeClass("hidden"),$("#newEntryRefEntries").html(t.ref_entries_html)):($(".formErrors").removeClass("visible"),$("#errorsPinyin").addClass("visible"),$("#notePinyin").addClass("hidden"),$("#blockRefs").addClass("hidden"))}function k(){n("pinyin")}function d(){n("trad")}function g(){$("#acceptTrad").hasClass("disabled")||(h()?($("#editPinyin").addClass("hidden"),e()):($("#editPinyin").removeClass("hidden"),n("pinyin")))}function nt(){i=!0}function tt(){i=!1}function it(n){if(n.which==13)return n.preventDefault(),s(),!1}function rt(){i||t.processSimp($("#newEntrySimp").val(),ut)}function ut(n,t,i){var r,o,f,e;for($("#newEntryTradCtrl").empty(),r=0;r<n.length;++r){for(o=$('<div class="newEntryTradPos"/>'),f=0;f<n[r].length;++f)e=$("<span />"),f!=0&&e.addClass("tradAlt"),e.text(n[r][f]),o.append(e);$("#newEntryTradCtrl").append(o)}n.length==0&&$("#newEntryTradCtrl").append("\u00a0");i?$(".newEntryKnown").addClass("visible"):$(".newEntryKnown").removeClass("visible");$(".tradAlt").unbind("click",u);$(".tradAlt").click(u);c(t)}function s(){$("#acceptSimp").hasClass("disabled")||(t.verifySimp($("#newEntrySimp").val(),ft),$("#acceptSimp").addClass("disabled"))}function ft(t){var i,r;if($("#acceptSimp").removeClass("disabled"),t.passed)$("#errorsSimp").removeClass("visible"),$("#noteSimp").removeClass("hidden"),et()?h()?($("#editTrad").addClass("hidden"),$("#editPinyin").addClass("hidden"),e()):($("#editPinyin").removeClass("hidden"),$("#editTrad").addClass("hidden"),n("pinyin")):($("#editPinyin").removeClass("hidden"),$("#editTrad").removeClass("hidden"),n("trad"));else{for($(".formErrors").removeClass("visible"),$("#errorsSimp").addClass("visible"),$("#noteSimp").addClass("hidden"),$("#errorListSimp").empty(),i=0;i<t.errors.length;++i)r=$("<li/>"),r.text(t.errors[i]),$("#errorListSimp").append(r);$("#newEntrySimp").focus()}}function et(){var n=!0,t=$("#newEntryTradCtrl");return t.children().each(function(){$(this).children().length>1&&(n=!1)}),n}function h(){var n=!0,t=$("#newEntryPinyinCtrl");return t.children().each(function(){$(this).children().length>1&&(n=!1)}),n}function ot(){n("simp")}function r(){var n="",t=$("#newEntryTradCtrl");return t.children().each(function(){n+=$(this).children().first().text()}),n}function o(){var n="",i=$("#newEntryPinyinCtrl"),t=!0;return i.children().each(function(){t||(n+=" ");t=!1;n+=$(this).children().first().text()}),n}function u(){var f,n,i,e;if($("#blockTrad").hasClass("active")){for(f=$(this).parent(),n=[],n.push($(this).text()),f.children().each(function(){$(this).text()!=n[0]&&n.push($(this).text())}),f.empty(),i=0;i<n.length;++i)e=$("<span />"),i!=0&&e.addClass("tradAlt"),e.text(n[i]),f.append(e);$(".tradAlt").unbind("click",u);$(".tradAlt").click(u);t.processSimpTrad($("#newEntrySimp").val(),r(),st)}}function c(n){var t,u,i,r;for($("#newEntryPinyinCtrl").empty(),t=0;t!=n.length;++t){for(u=$('<div class="newEntryPinyinPos"/>'),i=0;i!=n[t].length;++i)r=$("<span/>"),i!=0&&r.addClass("pyAlt"),r.text(n[t][i]),u.append(r);$("#newEntryPinyinCtrl").append(u)}n.length==0&&$("#newEntryPinyinCtrl").append("\u00a0");$(".pyAlt").unbind("click",f);$(".pyAlt").click(f)}function f(){var i,n,t,r;if($("#blockPinyin").hasClass("active")){for(i=$(this).parent(),n=[],n.push($(this).text()),i.children().each(function(){$(this).text()!=n[0]&&n.push($(this).text())}),i.empty(),t=0;t<n.length;++t)r=$("<span />"),t!=0&&r.addClass("pyAlt"),r.text(n[t]),i.append(r);$(".pyAlt").unbind("click",f);$(".pyAlt").click(f)}}function st(n,t){c(n);t?$(".newEntryKnown").addClass("visible"):$(".newEntryKnown").removeClass("visible")}var t,i;$(document).ready(function(){zdPage.registerInitScript("edit/new",l)});i=!1}(),zdNewEntryServer=function(){return{processSimp:function(n,t){var i=$.ajax({url:"/Handler.ashx",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:{action:"newentry_processsimp",simp:n}});i.done(function(n){t(n.trad,n.pinyin,n.is_known_headword)})},verifySimp:function(n,t){var i=$.ajax({url:"/Handler.ashx",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:{action:"newentry_verifysimp",simp:n}});i.done(function(n){var i={passed:n.passed,errors:n.errors};t(i)})},verifyHead:function(n,t,i,r){var u=$.ajax({url:"/Handler.ashx",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:{action:"newentry_verifyhead",simp:n,trad:t,pinyin:i}});u.done(function(n){var t={passed:n.passed,ref_entries_html:n.ref_entries_html};r(t)})},verifyTrg:function(n,t,i,r,u){var f=$.ajax({url:"/Handler.ashx",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:{action:"newentry_verifyfull",simp:n,trad:t,pinyin:i,trg:r}});f.done(function(n){var t={passed:n.passed,errors:n.errors,preview:n.preview_html};u(t)})},processSimpTrad:function(n,t,i){var r=$.ajax({url:"/Handler.ashx",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:{action:"newentry_processsimptrad",simp:n,trad:t}});r.done(function(n){i(n.pinyin,n.is_known_headword)})},submit:function(n,t,i,r,u,f){var e=$.ajax({url:"/Handler.ashx",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:{action:"newentry_submit",simp:n,trad:t,pinyin:i,trg:r,note:u}});e.done(function(n){f(n.success)});e.fail(function(){f(!1)})}}}(),zdStrokeAnim=function(){function k(){var t=p;t=t.replace("{{soa-title}}",uiStrings["anim-title"]);t=t.replace("{{soa-attribution}}",uiStrings["anim-attribution"]);$("#soaBox").html(t);$("#soaGraphics").click(function(){i==null&&n.strokes!=null&&n.strokes.length>0&&(h(n.strokes,n.medians),soaRenderBG(),v(),i=setInterval(y,l))})}function d(n){var i,r;const t=[];for(i=0;i!=n.length;i++)r=n[i],t.push(t.length===0?"M":"L"),t.push(""+r[0]),t.push(""+r[1]);return t.join(" ")}function g(n){for(var i=0,t=0;t<n.length-1;t++){var r=n[t][0],u=n[t][1],f=n[t+1][0],e=n[t+1][1];i+=Math.sqrt((f-r)*(f-r)+(e-u)*(e-u))}return i}function h(r,u){i!=null&&(clearInterval(i),i=null);t.currFinished=!1;t.currStroke=0;t.currLength=0;n.strokes=r;n.medians=u;n.medianPaths=[];n.medianLengths=[];for(var f=0;f!=n.medians.length;f++)n.medianPaths.push(d(n.medians[f])),n.medianLengths.push(g(n.medians[f]))}function nt(n,t,i,u,f,e,o,s){var h=document.createElementNS(r,"rect");return h.setAttributeNS(null,"x",n),h.setAttributeNS(null,"y",t),h.setAttributeNS(null,"width",i),h.setAttributeNS(null,"height",u),h.setAttributeNS(null,"fill",f),h.setAttributeNS(null,"stroke",e),h.setAttributeNS(null,"stroke-width",o),h.setAttributeNS(null,"stroke-dasharray",s),h}function o(n,t,i,u,f,e,o){var s=document.createElementNS(r,"line");return s.setAttributeNS(null,"x1",n),s.setAttributeNS(null,"y1",t),s.setAttributeNS(null,"x2",i),s.setAttributeNS(null,"y2",u),s.setAttributeNS(null,"stroke",f),s.setAttributeNS(null,"stroke-width",e),s.setAttributeNS(null,"stroke-dasharray",o),s}function s(n,t,i){var u=document.createElementNS(r,"path");return u.setAttributeNS(null,"fill",n),u.setAttributeNS(null,"stroke",t),u.setAttributeNS(null,"d",i),u}function tt(){var n,i,t;for($("#soaError").css("display","none"),n=document.getElementById("strokeAnimSVG");n.hasChildNodes();)n.removeChild(n.lastChild);n.appendChild(nt(2,2,1022,1022,"none",f,4,"10, 5"));n.appendChild(o(0,512,1024,512,f,2,"10, 5"));n.appendChild(o(512,0,512,1024,f,2,"10, 5"));n.appendChild(o(0,0,1024,1024,f,2,"10, 5"));n.appendChild(o(1024,0,0,1024,f,2,"10, 5"));i=document.createElementNS(r,"g");i.setAttributeNS(null,"id","strokeAnimGroup");i.setAttributeNS(null,"transform","scale(1, -1) translate(0, -900)");n.appendChild(i);t=document.createElementNS(r,"g");t.setAttributeNS(null,"id","strokeGroupGhost");i.appendChild(t);t=document.createElementNS(r,"g");t.setAttributeNS(null,"id","strokeGroupActive");i.appendChild(t);t=document.createElementNS(r,"g");t.setAttributeNS(null,"id","strokeGroupFinished");i.appendChild(t)}function v(){for(var u,i,f=document.getElementById("strokeGroupGhost"),t=0;t<n.strokes.length;t++)u=s(e,e,n.strokes[t]),i=document.createElementNS(r,"g"),i.setAttributeNS(null,"id","strokeGroup"+t),i.appendChild(u),f.appendChild(i)}function it(){var h,l,u,o;if(!(t.currStroke>=n.strokes.length)){var c=n.strokes[t.currStroke],v=n.medianPaths[t.currStroke],f=n.medianLengths[t.currStroke],y="strokeGroup"+t.currStroke,i=document.getElementById(y);if(t.currLength<f){while(i.hasChildNodes())i.removeChild(i.lastChild);o=document.getElementById("strokeGroupActive");o.appendChild(i);i.appendChild(s(e,e,c));h=document.createElementNS(r,"clipPath");h.setAttributeNS(null,"id","strokeClip");l=document.createElementNS(r,"path");l.setAttributeNS(null,"d",c);h.appendChild(l);i.appendChild(h);u=s("none",b,v);u.setAttributeNS(null,"clip-path","url(#strokeClip)");u.setAttributeNS(null,"stroke-linecap","round");u.setAttributeNS(null,"stroke-width","128");u.setAttributeNS(null,"stroke-dasharray",f+" "+2*f);u.setAttributeNS(null,"stroke-dashoffset",f-t.currLength);i.appendChild(u)}else if(!t.currFinished){for(t.currFinished=!0;i.hasChildNodes();)i.removeChild(i.lastChild);o=document.getElementById("strokeGroupFinished");o.appendChild(i);i.appendChild(s(a,a,c))}}}function rt(){++u;i!=null&&(clearInterval(i),i=null)}function y(){if(t.currStroke==n.strokes.length){clearInterval(i);i=null;return}t.currLength>n.medianLengths[t.currStroke]+c*w?(t.currLength=0,t.currStroke++,t.currFinished=!1):t.currLength+=c;it()}function ut(n,t){n==u&&(t==null?($("#soaError").css("display","block"),$("#soaErrorContent").text(uiStrings["no-animation-for-char"])):(h(t.strokes,t.medians),soaRenderBG(),v(),i=setInterval(y,l)))}function ft(n){n==u&&($("#soaError").css("display","block"),$("#soaErrorContent").text(uiStrings["anim-query-failed"]))}function et(n){var t,i,r;h([],[]);++u;t=u;i="/ApiHandler.ashx";window.location.protocol=="file:"&&(i="http://localhost:65100/ApiHandler.ashx");r=$.ajax({url:i,type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:{action:"hanzi",hanzi:n,lookupid:u}});r.done(function(n){ut(t,n)});r.fail(function(n,i,r){ft(t,n,i,r)})}var p='<div id="soaBoxTail">&nbsp;<\/div>\n<div id="soaHead">\n  <div id="soaTitle">{{soa-title}}<\/div>\n  <div id="soaClose">X<\/div>\n<\/div>\n<div id="soaGraphics">\n  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewbox="0 0 1024 1024" id="strokeAnimSVG"><\/svg>\n  <div id="soaError"><div id="soaErrorContent"><\/div><\/div>\n<\/div>\n<div id="soaFooter">{{soa-attribution}}<\/div>\n',n={strokes:null,medians:null,medianPaths:[],medianLengths:[]},t={currFinished:!1,currStroke:0,currLength:0},u=parseInt(Math.random()*1e3,10),i=null,c=20,w=20,l=20,f="#607026",e="#d3d3d3",a="#303030",b="#606060",r="http://www.w3.org/2000/svg";return{init:function(){k()},kill:function(){rt()},renderBG:function(){tt()},startQuery:function(n){et(n)}}}(),zdLookup=function(){function c(){if(zdPage.setSearchParamsProvider(w),sessionStorage.getItem("strokesLoaded")){var n=document.createElement("script");document.getElementsByTagName("head")[0].appendChild(n);n.setAttribute("type","text/javascript");n.setAttribute("src",getStrokeDataUrl())}$("#btn-write").tooltipster({content:$("<span>"+uiStrings["tooltip-btn-brush"]+"<\/span>")});$("#btn-settings").tooltipster({content:$("<span>"+uiStrings["tooltip-btn-settings"]+"<\/span>")});$("#btn-search").tooltipster({content:$("<span>"+uiStrings["tooltip-btn-search"]+"<\/span>")});$("#btn-clear").click(y);$("#btn-settings").click(a);$("#btn-search").click(e);$("#txtSearch").keyup(function(n){if(n.keyCode==13)return e(),!1});$("#txtSearch").focus(p);$("#txtSearch").change(function(){appendNotOverwrite=!0})}function l(n){$("#results").append("<div id='soaBox' class='soaBoxLeft'><\/div>");zdStrokeAnim.init();$(".hanim").click(k);$("#soaClose").click(o);$("#soaBox").click(function(n){n.stopPropagation()});$("#txtSearch").val(n.query);$("#txtSearch").focus()}function a(n){var t=h,i;t=t.replace("{{options-title}}",uiStrings["options-title"]);t=t.replace("{{options-script}}",uiStrings["options-script"]);t=t.replace("{{options-simplified}}",uiStrings["options-simplified"]);t=t.replace("{{options-traditional}}",uiStrings["options-traditional"]);t=t.replace("{{options-bothscripts}}",uiStrings["options-bothscripts"]);t=t.replace("{{options-tonecolors}}",uiStrings["options-tonecolors"]);t=t.replace("{{options-nocolors}}",uiStrings["options-nocolors"]);t=t.replace("{{options-pleco}}",uiStrings["options-pleco"]);t=t.replace("{{options-dummitt}}",uiStrings["options-dummitt"]);$("#searchOptionsBox").html(t);zdPage.modalShown(r);i=$("#searchOptionsBox");i.addClass("visible");$("#optionsClose").click(r);i.click(function(n){n.stopPropagation()});$("#btn-settings").tooltipster("disable");n.stopPropagation();var f=$("#btn-settings"),o=[f.offset().left,f.offset().top,f.width(),f.height()],e=$("#optionsTail"),s=[e.offset().left,e.offset().top,e.width(),e.height()],c=o[0]+o[2]/2.2,l=s[0]+s[2]/2;i.offset({left:i.offset().left+c-l,top:i.offset().top});u();v()}function r(){$("#searchOptionsBox").removeClass("visible");zdPage.modalHidden();$("#btn-settings").tooltipster("enable")}function u(){var r=localStorage.getItem("uiscript"),i;r!==null&&(n=r);n==="simp"?$("#optScriptSimplified").addClass("selected"):n==="trad"?$("#optScriptTraditional").addClass("selected"):n==="both"&&$("#optScriptBoth").addClass("selected");i=localStorage.getItem("uitones");i!==null&&(t=i);t==="none"?$("#optToneColorsNone").addClass("selected"):t==="pleco"?$("#optToneColorsPleco").addClass("selected"):t==="dummitt"&&$("#optToneColorsDummitt").addClass("selected")}function v(){var t={mousedown:function(){$(this).animate({backgroundColor:s},200)},click:function(){$(this).animate({backgroundColor:i},400);f(this.id)},mouseenter:function(){$(this).animate({backgroundColor:i},400)},mouseleave:function(){var n=$(this).hasClass("selected")?i:"transparent";$(this).animate({backgroundColor:n},400)}},r={click:function(){$(this).animate({backgroundColor:i},400);f(this.id)}},n=t;$("#optScriptSimplified").on(n);$("#optScriptTraditional").on(n);$("#optScriptBoth").on(n);$("#optToneColorsNone").on(n);$("#optToneColorsPleco").on(n);$("#optToneColorsDummitt").on(n)}function f(n){function t(n){$(n).hasClass("selected")&&($(n).removeClass("selected"),$(n).animate({backgroundColor:"transparent"},400))}n.indexOf("optScript")===0?(t("#optScriptSimplified"),t("#optScriptTraditional"),t("#optScriptBoth")):n.indexOf("optToneColors")===0&&(t("#optToneColorsNone"),t("#optToneColorsPleco"),t("#optToneColorsDummitt"));$("#"+n).addClass("selected");n==="optScriptSimplified"?localStorage.setItem("uiscript","simp"):n==="optScriptTraditional"?localStorage.setItem("uiscript","trad"):n==="optScriptBoth"&&localStorage.setItem("uiscript","both");n==="optToneColorsNone"?localStorage.setItem("uitones","none"):n==="optToneColorsPleco"?localStorage.setItem("uitones","pleco"):n==="optToneColorsDummitt"&&localStorage.setItem("uitones","dummitt");u()}function y(){$("#txtSearch").val("");$("#txtSearch").focus()}function p(){zdPage.isMobile()||$("#txtSearch").select()}function w(){return{searchScript:n,searchTones:t}}function e(){"use strict";var n=$("#txtSearch").val().replace(" ","+");zdPage.submitSearch(n)}function b(n){var i=n.offset(),s=i.left<$(document).width()/2,f=i.left+n.width()+20,u;s?$("#soaBox").removeClass("soaBoxLeft"):($("#soaBox").addClass("soaBoxLeft"),f=i.left-$("#soaBox").width()-20);var e=i.top+n.height()/2,r=$("#soaBox").height(),t=e-r/2,o=window.pageYOffset+window.innerHeight-10;t+r>o&&(t=o-r);u=$("#headermask").position().top+$("#headermask").height()+window.pageYOffset;t<u&&(t=u);$("#soaBox").offset({left:f,top:t});$("#soaBoxTail").css("top",e-t-10+"px")}function k(n){var t=zdPage.getSelBoundElm();(t==null||t.textContent!=$(this).text())&&(n.stopPropagation(),zdStrokeAnim.kill(),$("#soaBox").css("display","block"),b($(this)),zdStrokeAnim.renderBG(),zdStrokeAnim.startQuery($(this).text()),zdPage.modalShown(o))}function o(){zdStrokeAnim.kill();$("#soaBox").css("display","none");zdPage.modalHidden()}var i="#ffe4cc",s="#ffc898",n="both",t="pleco",h='<div id="optionsTail">&nbsp;<\/div>\n<div id="optionsHeader">\n  <span id="optionsTitle">{{options-title}}<\/span>\n  <span id="optionsClose">X<\/span>\n<\/div>\n<div id="searchOptions">\n  <div class="optionHead">{{options-script}}<\/div>\n  <div class="optionBody">\n    <div class="optionItem" id="optScriptSimplified">\n      <span class="optionLabel">{{options-simplified}}<\/span>\n      <span class="optionExampleHan">\u6c49\u8bed<\/span>\n    <\/div>\n    <div class="optionItem" id="optScriptTraditional">\n      <span class="optionLabel">{{options-traditional}}<\/span>\n      <span class="optionExampleHan">\u6f22\u8a9e<\/span>\n    <\/div>\n    <div class="optionItem" id="optScriptBoth">\n      <span class="optionLabel">{{options-bothscripts}}<\/span>\n      <span class="optionExampleHan">\u6c49\u8bed \u2022 \u6f22\u8a9e<\/span>\n    <\/div>\n  <\/div>\n  <div class="optionHead">{{options-tonecolors}}<\/div>\n  <div class="optionBody">\n    <div class="optionItem toneColorsNone" id="optToneColorsNone">\n      <span class="optionLabel">{{options-nocolors}}<\/span>\n      <span class="optionExampleHan"><span class="tone1">\u5929<\/span><span class="tone2">\u4eba<\/span><span class="tone3">\u5f88<\/span><span class="tone4">\u5927<\/span>\u4e86<\/span>\n    <\/div>\n    <div class="optionItem toneColorsPleco" id="optToneColorsPleco">\n      <span class="optionLabel">{{options-pleco}}<\/span>\n      <span class="optionExampleHan"><span class="tone1">\u5929<\/span><span class="tone2">\u4eba<\/span><span class="tone3">\u5f88<\/span><span class="tone4">\u5927<\/span>\u4e86<\/span>\n    <\/div>\n    <div class="optionItem toneColorsDummitt" id="optToneColorsDummitt">\n      <span class="optionLabel">{{options-dummitt}}<\/span>\n      <span class="optionExampleHan"><span class="tone1">\u5929<\/span><span class="tone2">\u4eba<\/span><span class="tone3">\u5f88<\/span><span class="tone4">\u5927<\/span>\u4e86<\/span>\n    <\/div>\n  <\/div>\n<\/div>\n';zdPage.globalInit(c);$(document).ready(function(){zdPage.registerInitScript("search",l)})}(),zdHistory=function(){function t(){$(".opHistComment").tooltipster({content:$("<span>"+uiStrings["tooltip-history-comment"]+"<\/span>"),position:"left"});$(".opHistEdit").tooltipster({content:$("<span>"+uiStrings["tooltip-history-edit"]+"<\/span>"),position:"left"});$(".opHistFlag").tooltipster({content:$("<span>"+uiStrings["tooltip-history-flag"]+"<\/span>"),position:"left"});$(".opHistComment").click(i)}function i(t){for(var i=$(this),f,u,e;!i.hasClass("historyItem");)i=i.parent();f=i.data("entryid");u=n;u=u.replace("{{hint}}",uiStrings["history-commententry-hint"]);e={id:"dlgHistComment",title:uiStrings["history-commententry-title"],body:u,confirmed:function(){return r(f)},toFocus:"#txtHistComment"};zdPage.showModal(e);t.stopPropagation()}function r(n){var i=$("#txtHistComment").val(),t;return i.length==0?!1:(t=$.ajax({url:"/Handler.ashx",type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:{action:"history_commententry",entry_id:n}}),t.done(function(){zdPage.showAlert(uiStrings["history-commententry-successtitle"],uiStrings["history-commententry-successmessage"],!1)}),t.fail(function(){zdPage.showAlert("Csak a baj","Elment\u00e9s n\u00f3 n\u00f3.",!0)}),!0)}var n='<i class="fa fa-commenting-o" aria-hidden="true"><\/i><textarea id="txtHistComment" placeholder="{{hint}}"><\/textarea>';$(document).ready(function(){zdPage.registerInitScript("edit/history",t)})}(),zdDiagnostics=function(){"use strict";function t(){zdPage.showAlert("Herzlichen Gl\u00fcckwunsch!","Das hat diesmal ganz gut geklappt.",!1)}function i(){zdPage.showAlert("You have been pwned.","Got anything else to say?",!0)}function r(){var i=$("#txtPage").val(),n="/ApiHandler.ashx",t;window.location.protocol=="file:"&&(n="http://localhost:8000/ApiHandler.ashx");t=$.ajax({url:n,type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:{action:"debug",what:"query_page",page:i}});t.done(function(n){var i,t,r;for($("#progress").css("display","block"),$("#progressVal").html(""),$("#progressVal").append("<b>"+n.summary+"<\/b><br/>"),i=0;i!=n.items.length;++i)t=n.items[i],r="<b>"+t.code+"<\/b> &nbsp; "+t.headword+" &nbsp; "+t.when+" &nbsp; <i>"+t.note+"<\/i><br/>",$("#progressVal").append(r)})}function u(){var t,i;$("#progress").css("display","block");t="/ApiHandler.ashx";window.location.protocol=="file:"&&(t="http://localhost:8000/ApiHandler.ashx");i=$.ajax({url:t,type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:{action:"debug",what:"index_hdd"}});setTimeout(n,500)}function n(){var t="/ApiHandler.ashx",i;window.location.protocol=="file:"&&(t="http://localhost:8000/ApiHandler.ashx");i=$.ajax({url:t,type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:{action:"debug",what:"progress_index_hdd"}});i.done(function(t){$("#progressVal").text(t.progress);t.done||setTimeout(n,500)})}function f(){var n="/ApiHandler.ashx",t;window.location.protocol=="file:"&&(n="http://localhost:8000/ApiHandler.ashx");t=$.ajax({url:n,type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",data:{action:"debug",what:"recreate_db"}})}$(document).ready(function(){zdPage.registerInitScript("download",function(){$("#recreateDB").click(f);$("#indexHDD").click(u);$("#queryPage").click(r);$("#alertFail").click(i);$("#alertSucc").click(t)})})}();